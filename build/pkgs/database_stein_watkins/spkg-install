#!/bin/sh
###########################################
## database_stein_watkins
###########################################

if [ "x${SAGE_LOCAL}" = x ]; then
   echo "SAGE_LOCAL undefined ... exiting"
   echo "Maybe run 'sage -sh'?"
   exit 1
fi

SAGE_VERSION=`sed -n "s/,.*//;/Version/s/.*Version //p" "${SAGE_LOCAL}/bin/sage-banner"`
SAGE_MAJOR=`echo "${SAGE_VERSION}" | cut -d'.' -f1`

if [ "${SAGE_MAJOR}" -lt "6" ]; then
   echo "Your copy of Sage cannot use the latest"
   echo "version of the database.  Please update"
   echo "Sage to version 6.0 or later if you would"
   echo "like to use the Stein-Watkins database."
   exit $?
fi

TARGET="${SAGE_LOCAL}/share/stein_watkins"
if [ ! -d "${TARGET}" ]; then
   mkdir "${TARGET}"
fi

cd src

cp -rf swdb "${TARGET}/"
if [ $? -ne 0 ]; then
   echo "Error installing Stein-Watkins database"
   exit 1
fi
